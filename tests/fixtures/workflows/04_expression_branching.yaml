version: "2.0"
mode: "workflow_graph"
metadata:
  name: "Scenario 04: Expression Branching"
workflow:
  settings:
    entry_task: "set_flag"
    max_time_seconds: 60
    parallel_limit: 1
    continue_on_error: false
    max_task_iterations: 10
    max_workflow_iterations: 100
  tasks:
    - id: "set_flag"
      operator: "SetContextOperator"
      params:
        patch:
          flag: true
      transitions:
        - to: "split"
    - id: "split"
      operator: "NoOpOperator"
      transitions:
        - to: "success_node"
          when: { $expr: "context.flag == true" }
        - to: "fail_node"
          when: { $expr: "context.flag == false" }
    - id: "success_node"
      operator: "NoOpOperator"
      terminal: success
    - id: "fail_node"
      operator: "NoOpOperator"
      terminal: failure
